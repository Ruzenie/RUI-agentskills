# UI Agent Workspace 核心概念

## 概述

UI Agent Workspace 是一套专为前端UI开发设计的Agent协作框架，它提供了：
- **结构化Workspace**：管理项目、文件、状态的统一空间
- **画布系统**：可视化UI设计与原型绘制
- **修改记录协议**：精确追踪每一次UI变更
- **Markdown原生支持**：所有记录以Markdown格式持久化

## 核心架构

```
┌─────────────────────────────────────────────────────────────┐
│                    UI Agent Workspace                        │
├─────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │
│  │   Workspace  │  │   Canvas     │  │   Logger     │      │
│  │   Manager    │  │   System     │  │   System     │      │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘      │
│         │                 │                 │              │
│         └─────────────────┼─────────────────┘              │
│                           │                                │
│                    ┌──────┴──────┐                        │
│                    │  Markdown   │                        │
│                    │  Storage    │                        │
│                    └─────────────┘                        │
└─────────────────────────────────────────────────────────────┘
```

## 关键概念

### 1. Workspace（工作空间）

Workspace是项目的容器，包含：
- **项目配置**：技术栈、依赖、构建配置
- **文件树**：源代码、资源文件、文档
- **状态快照**：当前工作进度、未提交的修改
- **会话历史**：与Agent的所有交互记录

```
workspace/
├── .workspace/          # 工作空间元数据
│   ├── config.json      # 工作空间配置
│   ├── state.json       # 当前状态快照
│   └── sessions/        # 会话历史
├── src/                 # 源代码
├── docs/                # 文档
├── canvas/              # 画布文件
└── CHANGELOG.md         # 修改日志
```

### 2. Canvas（画布）

Canvas是可视化设计空间，支持：
- **页面布局绘制**：用ASCII/Mermaid绘制页面结构
- **组件原型**：快速勾勒组件外观
- **交互流程**：绘制用户操作路径
- **设计标注**：记录尺寸、颜色、间距

### 3. Modification Log（修改日志）

每一次UI修改都被结构化记录：
- **修改类型**：新增/删除/修改
- **影响范围**：文件、组件、样式
- **视觉变化**：前后对比描述
- **技术细节**：代码变更摘要

### 4. Agent角色

| 角色 | 职责 |
|------|------|
| **UI Designer** | 在画布上绘制设计原型 |
| **Component Developer** | 实现组件代码 |
| **Style Engineer** | 处理CSS/样式系统 |
| **Layout Architect** | 规划页面结构 |
| **Review Agent** | 检查修改是否符合规范 |

## 工作流程

```
用户请求 → 意图分析 → 画布规划 → 代码实现 → 记录变更 → 验证反馈
    ↑                                                    ↓
    └──────────────── 迭代优化 ←─────────────────────────┘
```

## 数据流

1. **用户输入** → 自然语言描述UI需求
2. **Agent解析** → 提取关键信息（组件、样式、布局）
3. **画布更新** → 在Markdown中绘制设计图
4. **代码生成** → 根据设计实现代码
5. **日志记录** → 结构化记录修改内容
6. **状态保存** → 更新Workspace状态

## 设计原则

1. **Markdown优先**：所有记录原生支持Markdown，便于版本控制
2. **可视化优先**：复杂概念用图形表达，降低理解成本
3. **可追溯性**：每一次修改都有完整上下文
4. **模块化**：Workspace、Canvas、Logger可独立使用
5. **人机协作**：人类可轻松理解和修改Agent生成的内容
